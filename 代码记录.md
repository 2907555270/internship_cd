# 代码记录

## 源码

### 1. SysMenuServiceImpl.java:

#### 	1.1 源码44行:

​		**缺陷：**

​			对于多个同时在线的用户，如何保证redis中sys_user与用户不重叠

#### 	1.2  function : covert 81行

​		**缺陷：**

​			构建的树展开会有大量的重复，若数据库数据错误存在循环菜单，严重的甚至导致构建树的时候出现死循环

​		**改进建议:**
​			基于每个菜单只设置一级子目录，并将每个菜单放在一个Map中，



## 访问权限

### 1. Role

| 方法名       |                                  | 权限            | 访问表                         | 疑问备注 |
| ------------ | -------------------------------- | --------------- | ------------------------------ | -------- |
| findAll      | (查询所有Role信息)               | sys:role:list   | sys_role                       |          |
| findRoles    | (条件+分页查询Role信息)          | sys:role:list   | sys_role                       |          |
| save         | (添加新的角色)                   | sys:role:save   | sys_role                       |          |
| updateById   | (修改角色信息)                   | sys:role:update | sys_role                       |          |
| deleteById   | (删除角色信息，并解绑对应信息)   | sys:role:delete | sys_role, user_role, role_menu |          |
|              |                                  |                 |                                |          |
| getRoleByUid | (根据用户id查询其拥有的权限信息) | sys:role:list   | sys_user_role                  | user?    |
| bindUserRole | 为用户绑定新的角色信息           | sys:role:save   |                                | user？   |



